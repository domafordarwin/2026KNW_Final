<%= form_with model: [:admin, @user], local: true do |f| %>
  <% if @user.errors.any? %>
    <div class="alert alert-error">
      <ul>
        <% @user.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= f.label :name, "이름" %>
    <%= f.text_field :name, required: true %>
  </div>

  <div class="form-group">
    <%= f.label :email_optional, "이메일" %>
    <%= f.email_field :email_optional %>
  </div>

  <div class="form-group">
    <%= f.label :role, "역할" %>
    <%= f.select :role, options_for_select([["역할 선택", ""], ["관리자", "admin"], ["학교 관리자", "school_manager"], ["교사", "teacher"], ["학생", "student"], ["학부모", "parent"]], @user.role), {}, required: true %>
  </div>

  <div class="form-group">
    <%= f.label :status, "상태" %>
    <%= f.select :status, options_for_select([["활성", "active"], ["비활성", "inactive"]], @user.status || "active") %>
  </div>

  <div class="form-group">
    <%= f.label :password, "비밀번호" %>
    <%= f.password_field :password %>
    <% if @user.persisted? %>
      <span style="font-size: 0.85rem; color: #666;">현재 비밀번호를 유지하려면 비워두세요</span>
    <% end %>
  </div>

  <div class="form-group">
    <%= f.label :password_confirmation, "비밀번호 확인" %>
    <%= f.password_field :password_confirmation %>
  </div>

  <div class="actions">
    <%= f.submit class: "btn btn-primary" %>
    <%= link_to "취소", admin_users_path, class: "btn btn-secondary" %>
  </div>
<% end %>
